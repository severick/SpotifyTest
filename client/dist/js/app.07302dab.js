(function(t){function e(e){for(var r,n,i=e[0],c=e[1],l=e[2],d=0,m=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&m.push(a[n][0]),a[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],r=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var r={},a={app:0},o=[];function n(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=r,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0011":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[this.user?[s("h1",[t._v("Hi there, "+t._s(this.user.display_name))]),s("img",{staticClass:"profile_pic",attrs:{src:this.user.images[0].url,alt:"profile_picture"}}),s("h3",[t._v("Here are your top tracks")]),s("v-container",[s("div",{staticClass:"tracks"},[s("v-slide-group",t._l(t.tracks,(function(e){return s("v-card",{key:e.id,staticClass:"d-flex flex-wrap track",attrs:{flat:"",outlined:"",tile:""}},[s("div",{staticClass:"track_info"},[s("div",{staticClass:"album_art"},[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(r){var a=r.hover;return[s("v-img",{class:{"on-hover":a},attrs:{height:"250",width:"250",src:e.album.images[0].url}},[s("v-row",{staticClass:"fill-height flex-column",attrs:{justify:"space-around"}},[s("div",{staticClass:"align-self-center"},[s("v-btn",{class:{"show-btn":a},attrs:{color:"transparent",icon:""},on:{click:function(s){return t.playPreview(e.preview_url)}}},[s("v-icon",{class:{"show-btn":a},attrs:{size:"36"}},[t._v(" mdi-play ")])],1),s("v-btn",{class:{"show-btn":a},attrs:{color:"transparent",icon:""},on:{click:function(e){return t.pausePreview()}}},[s("v-icon",{class:{"show-btn":a},attrs:{size:"36"}},[t._v(" mdi-pause ")])],1)],1)])],1)]}}],null,!0)})],1),s("div",{staticClass:"ablum_info"},[s("p",[t._v(t._s(e.artists[0].name))]),s("p",[t._v(t._s(e.name))])]),s("v-btn",{on:{click:function(s){return t.analyzeTrack(e.id)}}},[t._v(" Analyze Track")]),s("v-btn",{on:{click:function(e){return t.bpmSeed(t.analysis)}}},[t._v(" Get Recommendations")])],1)])})),1)],1)])]:t._e(),this.recommendations?[s("v-container",[s("div",{staticClass:"recommendations"},[s("v-slide-group",t._l(t.recommendations.tracks,(function(e){return s("v-card",{key:e.id,staticClass:"d-flex flex-wrap track",attrs:{flat:"",outlined:"",tile:""}},[s("div",{staticClass:"track_info"},[s("div",{staticClass:"album_art"},[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(r){var a=r.hover;return[s("v-img",{class:{"on-hover":a},attrs:{height:"250",width:"250",src:e.album.images[0].url}},[s("v-row",{staticClass:"fill-height flex-column",attrs:{justify:"space-around"}},[s("div",{staticClass:"align-self-center"},[s("v-btn",{class:{"show-btn":a},attrs:{color:"transparent",icon:""},on:{click:function(s){return t.playPreview(e.preview_url)}}},[s("v-icon",{class:{"show-btn":a},attrs:{size:"36"}},[t._v(" mdi-play ")])],1),s("v-btn",{class:{"show-btn":a},attrs:{color:"transparent",icon:""},on:{click:function(e){return t.pausePreview()}}},[s("v-icon",{class:{"show-btn":a},attrs:{size:36}},[t._v(" mdi-pause ")])],1)],1)])],1)]}}],null,!0)})],1),s("div",{staticClass:"ablum_info"},[s("p",[t._v(t._s(e.artists[0].name))]),s("p",[t._v(t._s(e.name))])]),s("v-btn",{on:{click:function(s){return t.analyzeTrack(e.id)}}},[t._v(" Analyze Track")]),s("v-btn",{on:{click:function(e){return t.bpmSeed(t.analysis)}}},[t._v(" Get Recommendations")])],1)])})),1)],1),s("v-btn",{on:{click:function(e){return t.createPlaylistFromSeed(t.analysis)}}},[t._v(" Get Recommendations")])],1)]:[s("h1",[t._v("Log in to Spotify using Authorization Code flow")]),s("a",{staticClass:"btn btn-primary",attrs:{href:"http://localhost:8081/login"}},[t._v("Log in with Spotify")]),s("br")]],2)},a=[],o=s("2b0e"),n=s("94ed"),i=(new Audio,{name:"Tracks",data(){return{icon:n["default"],email:""}},computed:{user(){return this.$store.getters.getUser},accessToken(){return this.$store.getters.getAccess},refreshToken(){return this.$store.getters.getRefresh},tracks(){return this.$store.getters.getTracks},analysis(){return this.$store.getters.getAnalysis},recommendations(){return this.$store.getters.getRecommendations}},methods:{logOut(){this.$store.commit("mutateUser",null),this.$router.push({name:"Home"})},playPreview(t){var e=document.getElementById("audio");if(t)if(e)e.pause(),e.currentTime=0,e.src=t,e.load(),e.play();else{const e=document.body.appendChild(document.createElement("audio"));e.id="audio",e.src=t,e.load(),e.play()}},pausePreview(){var t=document.getElementById("audio");t&&(t.pause(),t.currentTime=0)},topTracks(){o["default"].axios.get("https://api.spotify.com/v1/me/top/tracks?time_range=medium_term&limit=10&offset=5",{headers:{Authorization:"Bearer "+this.$store.state.access_token}}).then(t=>{console.log(t.data),this.$store.commit("mutateTracks",t.data),this.$router.push({name:"HelloWorld"}),console.log("state tracks are "),console.log(this.$store.state.tracks)})},analyzeTrack(t){o["default"].axios.get("https://api.spotify.com/v1/audio-features/"+t,{headers:{Authorization:"Bearer "+this.$store.state.access_token}}).then(t=>{this.$store.commit("setAnalysis",t.data)})},bpmSeed(t){o["default"].axios.get("https://api.spotify.com/v1/recommendations?seed_artists="+this.$store.state.tracks[0].artists[0].id+"&seed_tracks="+t.id+"&target_tempo="+t.tempo,{headers:{Authorization:"Bearer "+this.$store.state.access_token}}).then(t=>{this.$store.commit("setRecommendations",t.data)})},createPlaylistFromSeed(){const t=this,e={method:"post",headers:{Authorization:"Bearer "+this.$store.state.access_token,"Content-Type":"application/json"},url:"https://api.spotify.com/v1/users/"+this.$store.state.user.id+"/playlists",data:{name:"Test Playlist",description:"Created From my app",public:!1}};o["default"].axios(e).then((function(e){const s=t.$store.state.recommendations.tracks.map(t=>t.uri),r={method:"post",headers:{Authorization:"Bearer "+t.$store.state.access_token,"Content-Type":"application/json"},url:"https://api.spotify.com/v1/playlists/"+e.data.id+"/tracks",data:{uris:s}};o["default"].axios(r)}))}},created(){this.$route.query&&o["default"].axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+this.$route.query.access_token}}).then(t=>{this.$store.commit("mutateUser",t.data),this.$store.commit("mutateAccessToken",this.$route.query.access_token),this.$store.commit("mutateRefreshToken",this.$route.query.refresh_token),this.$router.push({name:"HelloWorld"}),console.log("Response from server: "),console.log(this.$store.state.user)})}}),c=i,l=(s("6076"),s("2877")),u=Object(l["a"])(c,r,a,!1,null,"74ef9896",null);e["default"]=u.exports},"07be":function(t,e,s){"use strict";var r=s("97af"),a=s.n(r);a.a},"2a9b":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var r=s("2b0e"),a=s("bc3a"),o=s.n(a),n=s("a7fe"),i=s.n(n),c=s("8c4f"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[this.user?[s("h1",[t._v("Hi there, "+t._s(this.user.display_name))]),s("img",{staticClass:"profile_pic",attrs:{src:this.user.images[0].url,alt:"profile_picture"}}),s("p",[t._v("Email address: "+t._s(this.user.email))]),s("p",[s("a",{attrs:{href:this.user.external_urls.spotify}},[t._v("Link to your profile")])]),s("p",[t._v("Number of followers: "+t._s(this.user.followers.total))]),s("p",[s("v-btn",{staticClass:"btn btn-primary",on:{click:t.topTracks}},[t._v("Top Tracks")])],1)]:[s("h1",[t._v("Log in to Spotify using Authorization Code flow")]),s("a",{staticClass:"btn btn-primary",attrs:{href:"http://localhost:8081/login"}},[t._v("Log in with Spotify")]),s("br")]],2)},u=[],d=(s("0011"),{name:"HelloWorld",data(){return{email:""}},computed:{user(){return this.$store.getters.getUser},accessToken(){return this.$store.getters.getAccess},refreshToken(){return this.$store.getters.getRefresh},tracks(){return this.$store.getters.getTracks}},methods:{logOut(){this.$store.commit("mutateUser",null),this.$router.push({name:"Home"})},topTracks(){r["default"].axios.get("https://api.spotify.com/v1/me/top/tracks?time_range=medium_term&limit=10&offset=5",{headers:{Authorization:"Bearer "+this.$store.state.access_token}}).then(t=>{console.log(t.data),this.$store.commit("setTracks",t.data.items),this.$router.push("/topTracks"),console.log("state tracks are "),console.log(this.$store.state.tracks)})}},created(){this.$route.query&&r["default"].axios.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+this.$route.query.access_token}}).then(t=>{this.$store.commit("setUser",t.data),this.$store.commit("mutateAccessToken",this.$route.query.access_token),this.$store.commit("mutateRefreshToken",this.$route.query.refresh_token),this.$store.dispatch("refreshTokens",this.$route.query),this.$router.push({name:"HelloWorld"})})}}),m=d,h=(s("07be"),s("2877")),p=Object(h["a"])(m,l,u,!1,null,"55316b9c",null),f=p.exports;r["default"].use(c["a"]);const v=new c["a"]({mode:"history",routes:[{path:"/",name:"HelloWorld",component:f,meta:{title:"Spotify Authorization Code example page"}},{path:"/topTracks",name:"Tracks",component:()=>Promise.resolve().then(s.bind(null,"0011")),meta:{title:"Top Tracks"}}]});var g=v,_=s("2f62"),y=s("0e44");r["default"].use(_["a"]);var k=new _["a"].Store({state:{user:null,access_token:null,refresh_token:null,tracks:null,analysis:null,recommendations:null},actions:{refreshTokens(t,e){const s=this,a={method:"get",url:"http://localhost:8081/refresh",headers:{refresh_token:e.refresh_token}};r["default"].axios(a).then((function(t){var e=JSON.parse(t.data);s.commit("mutateAccessToken",e.access_token)})),this.dispatch("autoRefresh",e)},autoRefresh(t,e){const{state:s,commit:r,dispatch:a}=t;e.access_token;let o=36e5;setTimeout(()=>this.dispatch("refreshTokens",e),o)}},mutations:{setUser(t,e){t.user=e},setTracks(t,e){t.tracks=e},mutateAccessToken(t,e){t.access_token=e},mutateRefreshToken(t,e){t.refresh_token=e},setAnalysis(t,e){t.analysis=e},setRecommendations(t,e){t.recommendations=e}},getters:{getUser(t){return t.user},getAccess(t){return t.access_token},getRefresh(t){return t.refresh_token},getTracks(t){return t.tracks},getAnalysis(t){return t.analysis},getRecommendations(t){return t.recommendations}},plugins:[Object(y["a"])()]}),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[s("div",{staticClass:"d-flex align-center"},[s("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),s("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-name-dark.png",width:"100"}})],1),s("v-spacer"),null==this.user?[s("v-menu",{attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[s("v-btn",t._g({attrs:{icon:"","x-larg":""}},r),[s("v-avatar",{attrs:{size:"36px",color:"brown"}})],1)]}}],null,!1,4218054080)},[s("v-card",[s("v-list-item-content",{staticClass:"justify-center"},[s("div",{staticClass:"mx-auto text-center"},[s("v-avatar",{attrs:{color:"brown"}}),s("h3",[t._v("LOGIN")]),s("p",{staticClass:"caption mt-1"},[t._v(" Login ")]),s("v-divider",{staticClass:"my-3"}),s("v-btn",{attrs:{depressed:"",rounded:"",text:""}},[t._v(" Edit Account ")]),s("v-divider",{staticClass:"my-3"}),s("v-btn",{attrs:{depressed:"",rounded:"",text:""}},[t._v(" Logout ")])],1)])],1)],1)]:[s("v-menu",{attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[s("v-btn",t._g({attrs:{icon:"","x-larg":""}},r),[s("v-avatar",{attrs:{size:"36px"}},[s("img",{attrs:{src:t.user.images[0].url}})])],1)]}}])},[s("v-card",[s("v-list-item-content",{staticClass:"justify-center"},[s("div",{staticClass:"mx-auto text-center"},[s("v-avatar",{attrs:{size:"36px"}},[s("img",{attrs:{src:t.user.images[0].url}})]),s("h3",[t._v(t._s(t.user.display_name))]),s("p",{staticClass:"caption mt-1"},[t._v(" "+t._s(t.user.email)+" ")]),s("v-divider",{staticClass:"my-3"}),s("v-btn",{attrs:{depressed:"",rounded:"",text:""}},[t._v(" Edit Account ")]),s("v-divider",{staticClass:"my-3"}),s("v-btn",{attrs:{depressed:"",rounded:"",text:""}},[t._v(" Logout ")])],1)])],1)],1)]],2),s("v-main",[s("v-container",{attrs:{fluid:""}},[s("router-view")],1)],1)],1)},$=[],w={name:"App",components:{HelloWorld:f},computed:{user(){return this.$store.getters.getUser}},data:()=>({})},T=w,x=Object(h["a"])(T,b,$,!1,null,null,null),C=x.exports,A=s("ce5b"),z=s.n(A);s("5363"),s("d1e7");r["default"].use(z.a);var j=new z.a({theme:{dark:!0}});s("bf40");r["default"].use(i.a,o.a,j),r["default"].config.productionTip=!1,g.beforeEach((t,e,s)=>(document.title=t.meta.title,s())),new r["default"]({router:g,store:k,vuetify:j,render:t=>t(C)}).$mount("#app")},6076:function(t,e,s){"use strict";var r=s("2a9b"),a=s.n(r);a.a},"97af":function(t,e,s){}});
//# sourceMappingURL=app.07302dab.js.map